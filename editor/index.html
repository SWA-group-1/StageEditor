<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <link rel="stylesheet" href="style/document.css"/>
  <link rel="stylesheet" href="style/form.css"/>
  <link rel="stylesheet" href="style/grid.css"/>
  <link rel="stylesheet" href="style/read_only_pane.css"/>
  <script src="scripts/download.js"></script>
  <script src="scripts/editor_grid.js"></script>
  <script src="scripts/load_image.js"></script>
  <script src="scripts/stage_json.js"></script>
  <script>
    function main() {
      update();
    }

    function update() {
      update_grid();
      update_json();
    }

    window.addEventListener("load", main);
  </script>
  <style>
    #editor {
      height: fit-content;
      width: 100%;

      position: relative;
    }

    #editor>* {
      height: 100%;
      width: 100%;

      position: absolute;
      top: 0;
    }

    #editor>#default_background {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #editor>#grid .tile {
      cursor: pointer;
    }

    #editor>#grid .tile.blocked {
      background-color: #F4433640;
      cursor: pointer;
    }

    #editor>img {
      position: relative;

      opacity: 0;
    }

    #stage_json {
      width: 100%;

      padding: 1em;

      white-space: pre;
      user-select: text;
    }
  </style>
  <title>Title</title>
</head>
<body>
  <div id="main">
    <h2>Stage specifications</h2>
    <form class="box">

      <div class="row">
        <label for="number">Number</label>
        <span class="spacer"></span>
        <input type="number" id="number" min="1" step="1" value="1"/>
      </div>

      <div class="row">
        <label for="name">Name</label>
        <span class="spacer"></span>
        <input type="text" id="name" value="Name"/>
      </div>

      <div class="row">
        <label for="column_number">Columns</label>
        <span class="spacer"></span>
        <input type="number" id="column_number" min="1" step="1" value="1"/>
      </div>

      <div class="row">
        <label for="row_number">Rows</label>
        <span class="spacer"></span>
        <input type="number" id="row_number" min="1" step="1" value="1"/>
      </div>

      <!--
      <div class="row">
        <label for="row_number">Load stage</label>
        <span class="spacer"></span>
        <input type="file" id="stage_file"/>
        <span class="spacer"></span>
        <input type="button" id="stage_file_load" value="Load"/>
      </div>
      -->

    </form>

    <h2>Stage editor</h2>
    <form class="box">
      <div class="row">
        <label for="image_file">Background image</label>
        <span class="spacer"></span>
        <input type="file" id="image_file" min="1" step="1" value="1"/>
      </div>
    </form>

    <div id="editor">
      <div id="default_background" class="read_only_pane">Your image will go here.</div>
      <img id="grid_background" src="#" alt="grid background" style="padding-top: 10%;"/>
      <div id="grid" class="grid">
      </div>
    </div>

    <h2>Stage JSON</h2>
    <form class="box">
      <div class="row">
        <input type="button" id="download" value="Download"/>
      </div>
    </form>
    <div id="stage_json" class="read_only_pane"></div>
  </div>
</body>
</html>